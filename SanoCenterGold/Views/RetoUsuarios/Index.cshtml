@model IEnumerable<SanoCenterGold.Models.RetoUsuario>

@{
    ViewData["Title"] = "Index";
}

<h1>Retos Finalizados</h1>
<div class="container-fluid">
    <div class="col">
        <table class="table table-striped table-dark">
            <thead style="text-align:center">
                <tr>
                    <th>
                        Reto
                    </th>
                    <th>
                        Fecha finalización
                    </th>
                    <th>
                        Valoración
                    </th>
                </tr>
            </thead>
            <tbody class="rankingtext">
                @if (Model != null && Model.Count() > 0)
                {
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.Reto.Nombre)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.FechaCompletado)
                            </td>
                            <td>

                                @*<a asp-action="Edit" asp-route-id="@item.IdRetoUsuario">Edit</a> |
                                    <a asp-action="Details" asp-route-id="@item.IdRetoUsuario">Details</a> |
                                    <a asp-action="Delete" asp-route-id="@item.IdRetoUsuario">Delete</a>*@

                                @if ((ViewData["Valoraciones"] as List<SanoCenterGold.Models.Valoracion>).Where(v => v.IdReto == item.Reto.Id).Count() < 1)
                                {
                                    <a asp-action="Valoracion" asp-controller="RetoUsuarios" asp-route-id="@item.IdReto">Valorar</a>
                                }
                                else
                                {
                                    <p>Reto ya valorado</p>
                                }
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>
